<!doctype html>
<html lang="cs">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>DASH Fullscreen Player</title>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/shaka-player/4.7.11/shaka-player.compiled.js"></script>

  <style>
    html, body {
      margin: 0;
      padding: 0;
      width: 100%;
      height: 100%;
      background: #000;
      overflow: hidden;
    }

    video {
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      background: #000;
      object-fit: contain;
    }
  </style>
</head>

<body>

<video id="video" controls autoplay playsinline></video>

<script>
async function initPlayer() {
  shaka.polyfill.installAll();

  if (!shaka.Player.isBrowserSupported()) {
    alert("Prohlížeč nepodporuje Shaka Player.");
    return;
  }

  const video = document.getElementById("video");
  const player = new shaka.Player(video);

  player.configure({
    drm: {
      clearKeys: {

        "9686ef8b4619efdda565ce80719dca1c": "2722defe7e502f6d3cd5f4d65d7ad53b"

      }
    }
  });

  try {
    await player.load(
      "https://r.dcs.redcdn.pl/livedash/play/playtv/indigo/live/tvn/live.livx?indexMode&futc"
    );
    console.log("Stream načten");
  } catch (e) {
    console.error("Chyba přehrávání:", e);
  }
}

initPlayer();

document.addEventListener("click", () => {
  const v = document.getElementById("video");
  if (v.requestFullscreen && !document.fullscreenElement) {
    v.requestFullscreen().catch(()=>{});
  }
});
</script>

</body>
</html>
